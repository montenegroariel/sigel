<?php
require_once PRE . DIRECTORY_SEPARATOR . 'PermisoPresentacion.php';

	switch ($_GET['accion']) {	
	case 'nuevoPermiso':
		echo "<div id='page-wrapper'>" ;
		echo "<div class='row'>";
		echo "<div class='col-lg-12'>";            
		echo "<h1 class='page-header'>Permisos";
		echo "</h1>";
		echo "</div>";
		echo "</div>";
		echo PermisoPresentacion::nuevoPermiso();
		echo "</div>";
		echo "</div>";
		break;
    case 'modificarPermiso':
		echo "<div id='page-wrapper'>" ;
		echo "<div class='row'>";
		echo "<div class='col-lg-12'>";            
		echo "<h1 class='page-header'>Permisos";
		echo "</h1>";
		echo "</div>";
		echo "</div>";
		echo PermisoPresentacion::modificarPermiso($_GET['id']);
		echo "</div>";
		echo "</div>";
		break;
    case 'guardarPermiso':
		echo PermisoPresentacion::guardarPermiso('',$_POST['id_perfil'],$_POST['id_modulo'],false,false,false);
            header("Location:index.php?modulo=". $_GET['modulo'] ."&accion=inicio");
		break;

    case 'guardarPermisoModificado':
        $id_arr = unserialize($_POST['id_arr']);             
    

        $cont = 0;
        foreach($id_arr as $value){


        $agregar = (isset($_POST['agregar_' . $id_arr[$cont]])) ? true : false;
        $modificar = (isset($_POST['modificar_' . $id_arr[$cont]])) ? true : false;
        $eliminar = (isset($_POST['eliminar_' . $id_arr[$cont]])) ? true : false;
      
        PermisoPresentacion::guardarPermisoModificado(
        $id_arr[$cont],
        $_POST['id_perfil'],
        $_POST['id_modulo'],
        $agregar,
        $modificar,
        $eliminar);

        $cont++;
        }
        

 
        header("Location:index.php?modulo=". $_GET['modulo'] ."&accion=inicio");
        break;

    case 'eliminarPermiso':
		echo PermisoPresentacion::eliminarPermiso($_GET['id']);
            header("Location:index.php?modulo=". $_GET['modulo'] ."&accion=inicio");
		break;
	default:
        $id = (filter_input(\INPUT_POST, 'id_perfil')) ? filter_input(\INPUT_POST, 'id_perfil') : 1;
		echo "<div id='page-wrapper'>" ;
		echo "<div class='row'>";
		echo "<div class='col-lg-12'>";            
		echo "<h1 class='page-header'>Permisos";
		echo "</h1>";
		echo "</div>";
		echo "</div>";
		echo PermisoPresentacion::listadoPermisos($id);
		echo "</div>";
		echo "</div>";
		break;
    }

