<?php
require_once 'configuracion.php';
require_once PER . DIRECTORY_SEPARATOR . 'ModuloPersistencia.php';


/**
 * Description of Usuario
 *
 * @author Pc
 */
class Modulo
{
    private $_id; 
    private $_detalle; 
    private $_idpadre;
    private $_enlace;

    public function __construct($id = "", $detalle = "", $idpadre = "",$enlace = "") 
    {
        $this->_id = $id; 
        $this->_detalle = $detalle; 
        $this->_idpadre = $idpadre;
        $this->_enlace = $enlace;
    }


    public function buscar($id)
    {
        foreach($this->_modulos as $modulo){

            $encontrado = $modulo->buscar($id);

            if($encontrado !== false){
                return $encontrado;
            }
        }
    }
    
    
    public static function getModulos($perfil)
    {
        $moduloPersistencia = new ModuloPersistencia(); 
        $datos_array = $moduloPersistencia->getModulos($perfil); 
        //var_dump($datos_array);
        //break;
        foreach($datos_array as $modulos_array){ 
            $id = $modulos_array['id'];                         
            $detalle = $modulos_array['detalle'];                         
            $id_padre = $modulos_array['id_padre'];
            $enlace = $modulos_array['enlace'];
            $retorno[] = new Modulo($id, $detalle, $id_padre, $enlace);
        } 
        return $retorno;
    }
    
    public static function getSubModulo() {
        $moduloPersistencia = new ModuloPersistencia();
        $datos_array = $moduloPersistencia->getSubModulos($id);
       foreach($datos_array as $modulos_array){ 
            $id = $modulos_array['id'];                         
            $detalle = $modulos_array['detalle'];                         
            $id_padre = $modulos_array['id_padre'];
            $retorno[] = new Modulo($id, $detalle, $id_padre);
        } 
        return $retorno;
    }
    
    public function getId()
    { 
        return $this->_id; 
    }
    
    public function getDetalle() 
    {
        return $this->_detalle;
    }
    
    public function getPadre() 
    { 
        return $this->_idpadre; 
    }
    public function getEnlace() 
    { 
        return $this->_enlace; 
    }

   
    public function __toString() 
    { 
        return $this->_id." ".$this->_detalle." ".$this->_idpadre." ".$this->_enlace;
    }
    
   
}