<?php
require_once 'configuracion.php';

require_once PER . DIRECTORY_SEPARATOR . 'BaseDeDatos.php';
require_once PER . DIRECTORY_SEPARATOR . 'MySQL.php';
require_once PER . DIRECTORY_SEPARATOR . 'Sql.php';


    class ModuloPersistencia
    {
        public function getPermisos($perfil) {
        $bd = new BaseDeDatos(new MySQL());
        $sql = new Sql();
        $sql->addTable('sge_permisos');
        $sql->addFuncion("SELECT ");
        $sql->addWhere(" id_perfil = ".$perfil); 
        //echo $sql;        
        $resultado_arr = $bd->ejecutar($sql);
        //var_dump($resultado_arr);
        //break;
        return $resultado_arr;
        }

        public function getModulos($perfil) {
            $bd = new BaseDeDatos(new MySQL());
            $sql = new Sql();
            $sql->addFuncion("SELECT sge_modulos. *");
            $sql->addTable('sge_modulos JOIN sge_permisos');            
            $sql->addWhere(" sge_permisos.id_perfil = " . $perfil . " AND sge_permisos.id_modulo = sge_modulos.id");
            $resultado_arr = $bd->ejecutar($sql);
            //var_dump($resultado_arr);
            //break;
            return $resultado_arr;
        }

           
   
    }